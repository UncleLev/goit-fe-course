"use strict";function n(e,t){var r=document.querySelector(e).innerHTML.trim(),n=Handlebars.compile(r)(a);document.querySelector(t).innerHTML=n}function o(){localStorage.setItem("bookmark",JSON.stringify(a)),a=JSON.parse(localStorage.getItem("bookmark"))}var e=document.querySelector(".btn-js"),t=document.querySelector("#urlAddress"),a=JSON.parse(localStorage.getItem("bookmark"));null==a&&(a=[]),n("#bookmark","#bookmark-list");var r=document.querySelector("#bookmark-list");e.addEventListener("click",function(){event.preventDefault();var e=t.value;!function(e){return!!/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/.test(e)}(e)?alert("This is invalid url"):function(e){var t,r={key:"5d069d150872101ed443356f762e9132b58f8c80e131d",q:e};fetch("https://api.linkpreview.net",{method:"POST",mode:"cors",body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){!function(t,e,r){return null==e.find(function(e){return e[t]==r})}("url",a,(t=e).url)?alert("This url already added"):null==t.error?(t.id=Date.now(),a.unshift(e),o(),n("#bookmark","#bookmark-list")):alert("impossible to add this url")}).catch(function(e){return console.log("ERROR "+e)})}(e)}),r.addEventListener("click",function(e){if("delete"==e.target.getAttribute("id")){var t=e.target.parentElement.parentElement.getAttribute("bookmarkId");a=a.filter(function(e){return e.id!=t}),o(),n("#bookmark","#bookmark-list")}});